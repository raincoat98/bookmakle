// ë‹¤êµ­ì–´ ì§€ì›ì„ ìœ„í•œ ë²ˆì—­ ë°ì´í„°
const translations = {
  ko: {
    title: "ë¶ë§ˆí´ - ë¡œê·¸ì¸",
    browserWarning: "ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ì•ˆë‚´",
    browserCompatibility: "ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ì•ˆë‚´",
    recommendedBrowsers: "ê¶Œì¥ ë¸Œë¼ìš°ì €:",
    browserTip: "ğŸ’¡ íŒ:",
    browserTipContent:
      'í˜„ì¬ ì•±ì—ì„œ "ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°" ë˜ëŠ” "ì™¸ë¶€ ë¸Œë¼ìš°ì €ë¡œ ì—´ê¸°" ì˜µì…˜ì„ ì°¾ì•„ë³´ì„¸ìš”.',
    authStatus: "ë¡œê·¸ì•„ì›ƒ",
    loggedIn: "ë¡œê·¸ì¸ë¨",
    loggedOut: "ë¡œê·¸ì•„ì›ƒ",
    welcome: "ë¶ë§ˆí´ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!",
    description: "ë¶ë§ˆí¬ë¥¼ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”",
    loginWithGoogle: "Googleë¡œ ë¡œê·¸ì¸",
    dashboard: "ëŒ€ì‹œë³´ë“œë¡œ ê°€ê¸°",
    logout: "ë¡œê·¸ì•„ì›ƒ",
    closeTab: "íƒ­ ë‹«ê¸°",
    email: "ì´ë©”ì¼",
    password: "ë¹„ë°€ë²ˆí˜¸",
    loginWithEmail: "ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸",
    signUp: "íšŒì›ê°€ì…",
    korean: "í•œêµ­ì–´",
    english: "English",
    japanese: "æ—¥æœ¬èª",
    or: "ë˜ëŠ”",
    emailPlaceholder: "ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”",
    passwordPlaceholder: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”",
    noAccountSignup: "ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? íšŒì›ê°€ì…",
    alreadyHaveAccount: "ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸",
    appName: "ë¶ë§ˆí´",
    appDescription: "ë¶ë§ˆí¬ë¥¼ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”",
    displayName: "ì‚¬ìš©ìëª…",
    displayNamePlaceholder: "ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”",
    confirmPassword: "ë¹„ë°€ë²ˆí˜¸ í™•ì¸",
    confirmPasswordPlaceholder: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”",
    signupPasswordPlaceholder: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 6ì)",
    debugLogs: "ë””ë²„ê·¸ ë¡œê·¸",
    viewLogs: "ë³´ê¸°",
    clearLogs: "ë¡œê·¸ ì§€ìš°ê¸°",
  },
  en: {
    title: "Bookmarkle - Login",
    browserWarning: "Browser Compatibility Notice",
    browserCompatibility: "Browser Compatibility Notice",
    recommendedBrowsers: "Recommended browsers:",
    browserTip: "ğŸ’¡ Tip:",
    browserTipContent:
      'Look for "Open in Browser" or "Open in External Browser" options in the current app.',
    authStatus: "Logged Out",
    loggedIn: "Logged In",
    loggedOut: "Logged Out",
    welcome: "Welcome to Bookmarkle!",
    description: "Manage your bookmarks smartly",
    loginWithGoogle: "Login with Google",
    dashboard: "Go to Dashboard",
    logout: "Logout",
    closeTab: "Close Tab",
    email: "Email",
    password: "Password",
    loginWithEmail: "Login with Email",
    signUp: "Sign Up",
    korean: "í•œêµ­ì–´",
    english: "English",
    japanese: "æ—¥æœ¬èª",
    or: "or",
    emailPlaceholder: "Enter your email",
    passwordPlaceholder: "Enter your password",
    noAccountSignup: "Don't have an account? Sign Up",
    alreadyHaveAccount: "Already have an account? Login",
    appName: "Bookmarkle",
    appDescription: "Manage your bookmarks smartly",
    displayName: "Display Name",
    displayNamePlaceholder: "Enter your display name",
    confirmPassword: "Confirm Password",
    confirmPasswordPlaceholder: "Enter your password again",
    signupPasswordPlaceholder: "Enter your password (minimum 6 characters)",
    debugLogs: "Debug Logs",
    viewLogs: "View",
    clearLogs: "Clear Logs",
  },
  ja: {
    title: "ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ« - ãƒ­ã‚°ã‚¤ãƒ³",
    browserWarning: "ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ã«ã¤ã„ã¦",
    browserCompatibility: "ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ã«ã¤ã„ã¦",
    recommendedBrowsers: "æ¨å¥¨ãƒ–ãƒ©ã‚¦ã‚¶ï¼š",
    browserTip: "ğŸ’¡ ãƒ’ãƒ³ãƒˆï¼š",
    browserTipContent:
      "ç¾åœ¨ã®ã‚¢ãƒ—ãƒªã§ã€Œãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã€ã¾ãŸã¯ã€Œå¤–éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¢ã—ã¦ãã ã•ã„ã€‚",
    authStatus: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",
    loggedIn: "ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿",
    loggedOut: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",
    welcome: "ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ«ã¸ã‚ˆã†ã“ãï¼",
    description: "ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚’ã‚¹ãƒãƒ¼ãƒˆã«ç®¡ç†ã—ã¾ã—ã‚‡ã†",
    loginWithGoogle: "Googleã§ãƒ­ã‚°ã‚¤ãƒ³",
    dashboard: "ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸",
    logout: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",
    closeTab: "ã‚¿ãƒ–ã‚’é–‰ã˜ã‚‹",
    email: "ãƒ¡ãƒ¼ãƒ«",
    password: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",
    loginWithEmail: "ãƒ¡ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³",
    signUp: "ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—",
    korean: "í•œêµ­ì–´",
    english: "English",
    japanese: "æ—¥æœ¬èª",
    or: "ã¾ãŸã¯",
    emailPlaceholder: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    passwordPlaceholder: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    noAccountSignup: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹ã¯ï¼Ÿã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—",
    alreadyHaveAccount: "ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯ï¼Ÿãƒ­ã‚°ã‚¤ãƒ³",
    appName: "ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ«",
    appDescription: "ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚’ã‚¹ãƒãƒ¼ãƒˆã«ç®¡ç†ã—ã¾ã—ã‚‡ã†",
    displayName: "è¡¨ç¤ºå",
    displayNamePlaceholder: "è¡¨ç¤ºåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    confirmPassword: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèª",
    confirmPasswordPlaceholder: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†å…¥åŠ›ã—ã¦ãã ã•ã„",
    signupPasswordPlaceholder: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆæœ€ä½6æ–‡å­—ï¼‰",
    debugLogs: "ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°",
    viewLogs: "è¡¨ç¤º",
    clearLogs: "ãƒ­ã‚°ã‚’ã‚¯ãƒªã‚¢",
  },
};

// í˜„ì¬ ì–¸ì–´ ì„¤ì • (ê¸°ë³¸ê°’: í•œêµ­ì–´)
let currentLanguage = "ko";

// ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
function changeLanguage(lang) {
  if (translations[lang]) {
    currentLanguage = lang;
    localStorage.setItem("bookmarkle_language", lang);
    updateUI();
  }
}

// UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updateUI() {
  const t = translations[currentLanguage];

  // í˜ì´ì§€ ì œëª© ì—…ë°ì´íŠ¸
  document.title = t.title;

  // data-i18n ì†ì„±ì„ ê°€ì§„ ëª¨ë“  ìš”ì†Œ ì—…ë°ì´íŠ¸
  const elementsWithI18n = document.querySelectorAll("[data-i18n]");
  elementsWithI18n.forEach((element) => {
    const key = element.dataset.i18n;
    if (t[key]) {
      // ì•„ì´ì½˜ì´ ìˆëŠ” ê²½ìš° ì•„ì´ì½˜ì„ ìœ ì§€í•˜ê³  í…ìŠ¤íŠ¸ë§Œ ì—…ë°ì´íŠ¸
      const icon = element.querySelector("i[data-lucide]");
      if (icon) {
        const iconHtml = icon.outerHTML;
        element.innerHTML = iconHtml + " " + t[key];
      } else {
        element.textContent = t[key];
      }
    }
  });

  // data-i18n-placeholder ì†ì„±ì„ ê°€ì§„ ëª¨ë“  ìš”ì†Œ ì—…ë°ì´íŠ¸
  const elementsWithPlaceholder = document.querySelectorAll(
    "[data-i18n-placeholder]"
  );
  elementsWithPlaceholder.forEach((element) => {
    const key = element.dataset.i18nPlaceholder;
    if (t[key]) {
      element.placeholder = t[key];
    }
  });

  // íŠ¹ë³„í•œ ì²˜ë¦¬ê°€ í•„ìš”í•œ ìš”ì†Œë“¤ (data-i18nìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•ŠëŠ” ê²ƒë“¤)
  const browserWarningContent = document.getElementById(
    "browserWarningContent"
  );
  if (browserWarningContent) {
    browserWarningContent.textContent = t.browserCompatibility;
  }

  const recommendedBrowsersText = document.querySelector(
    ".browser-warning-content strong"
  );
  if (recommendedBrowsersText) {
    recommendedBrowsersText.textContent = t.recommendedBrowsers;
  }

  const browserTipElement = document.getElementById("browserWarningTip");
  if (browserTipElement) {
    browserTipElement.innerHTML = `<strong>${t.browserTip}</strong> ${t.browserTipContent}`;
  }

  // ì–¸ì–´ ì„ íƒ ë²„íŠ¼ ì—…ë°ì´íŠ¸
  const languageButtons = document.querySelectorAll(".language-btn");
  languageButtons.forEach((btn) => {
    const lang = btn.dataset.lang;
    if (lang === "ko") btn.textContent = t.korean;
    if (lang === "en") btn.textContent = t.english;
    if (lang === "ja") btn.textContent = t.japanese;

    // í™œì„± ìƒíƒœ ì—…ë°ì´íŠ¸
    if (lang === currentLanguage) {
      btn.classList.add("active");
    } else {
      btn.classList.remove("active");
    }
  });

  // Lucide ì•„ì´ì½˜ ë‹¤ì‹œ ë Œë”ë§
  if (typeof lucide !== "undefined") {
    lucide.createIcons();
  }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì–¸ì–´ ì„¤ì • ë³µì›
document.addEventListener("DOMContentLoaded", function () {
  const savedLanguage = localStorage.getItem("bookmarkle_language");
  if (savedLanguage && translations[savedLanguage]) {
    currentLanguage = savedLanguage;
  }
  updateUI();
});

// ì „ì—­ í•¨ìˆ˜ë¡œ ë…¸ì¶œ
window.changeLanguage = changeLanguage;
window.updateUI = updateUI;
window.translations = translations;
